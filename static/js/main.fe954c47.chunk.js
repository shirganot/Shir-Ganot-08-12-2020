(this.webpackJsonpshir_ganot_08_12_2020=this.webpackJsonpshir_ganot_08_12_2020||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(0),c=n(11),i=n.n(c),s=(n(94),n(32)),o=n(75),l=n(76),u=n(17),d=n(38),b=n(14),j=(n(99),n(64)),p=n(170),h=n(145),m=n(50),f=n(146),O=n(148),g=n(166),x=n(151),v=n(152),y=n(147),E=n(153),w=n(154),S=/\S+@\S+\.\S+/,T=Object.freeze({required:"This field is required",pattern:"The email is not valid",requiredSearchedEmail:"Please enter the desired email in the search box"}),I=n(12),C=n.n(I),k=n(21),_="GET_ALL_USER_MESSAGES",R="DELETE_MASSEGE",M="CREATE_NEW_MSG",q="SET_CHOSEN_MSG",N="SET_CURRENT_TAB_IN_MANAGER",L="SET_ERROR";function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="".concat("http://localhost:8080/api").concat(e),a=t?fetch(n,t):fetch(n);return new Promise((function(e,t){a.then(A).then((function(e){var t=e.ok,n=e.data;if(!t)throw new Error(n.message);return n})).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))}function A(e){return new Promise((function(t){e.json().then((function(n){t({data:n,ok:e.ok})}))}))}n(101).config();var D=function(e){return{type:L,payload:e}},P=function(e){return function(){var t=Object(k.a)(C.a.mark((function t(n){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B("/messages/".concat(e),{method:"DELETE"});case 3:n({type:R,payload:{msgId:e}}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),n(D("Delete message wasn't successful - ".concat(t.t0.message)));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},G=function(){var e=Object(b.g)(),t=Object(u.b)(),n=Object(j.a)(),r=n.register,c=n.handleSubmit,i=n.errors,s=function(){return e.push("/manage-emails")};return Object(a.jsxs)(p.a,{className:"compose-email",open:!0,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsxs)(h.a,{id:"alert-dialog-title",disableTypography:!0,children:[Object(a.jsx)(m.a,{variant:"h5",children:"Compose Email"}),Object(a.jsx)(f.a,{"aria-label":"close",onClick:s,children:Object(a.jsx)(y.a,{})})]}),Object(a.jsx)(O.a,{children:Object(a.jsxs)("form",{onSubmit:c((function(e){var n;t((n=e,function(){var e=Object(k.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:a=e.sent,t({type:M,payload:{newMsg:a}}),t(D(null)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(D("Message was not sent because - ".concat(e.t0.message)));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())),s()})),id:"myform",children:[Object(a.jsx)(g.a,{type:"text",name:"senderEmail",label:"enter sender email",variant:"outlined",inputRef:r({required:!0,pattern:S}),error:Boolean(i.senderId),helperText:i.senderId&&T[i.senderId.type]}),Object(a.jsx)(g.a,{type:"text",name:"receiverEmail",label:"enter receiver email",variant:"outlined",inputRef:r({required:!0,pattern:S}),error:Boolean(i.receiverId),helperText:i.receiverId&&T[i.receiverId.type]}),Object(a.jsx)(g.a,{type:"text",name:"subject",label:"Subject",variant:"outlined",inputRef:r({required:!0}),error:Boolean(i.subject),helperText:i.subject&&T[i.subject.type]}),Object(a.jsx)(g.a,{type:"text",name:"body",label:"Message",multiline:!0,rows:18,variant:"outlined",inputRef:r({required:!0}),error:Boolean(i.message),helperText:i.message&&T[i.message.type]})]})}),Object(a.jsxs)(x.a,{children:[Object(a.jsxs)(v.a,{onClick:s,color:"secondary",variant:"contained",children:[Object(a.jsx)(E.a,{}),"Delete"]}),Object(a.jsxs)(v.a,{autoFocus:!0,color:"primary",variant:"contained",type:"submit",form:"myform",children:[Object(a.jsx)(w.a,{}),"Send"]})]})]})},F=(n(105),n(163)),J=n(164),z=(n(106),n(150)),H=n(155),U=n(156),W=n(157),V=n(63),K=n.n(V),Q=function(){var e=Object(u.b)(),t=Object(b.g)(),n=Object(u.c)((function(e){return e.messages})),r=Object(u.c)((function(e){return e.navigationInfo})).currTab,c=function(n){e(function(e){return{type:q,payload:{msgId:e}}}(n)),t.push("/manage-emails/email-body")};return n[r].length?Object(a.jsx)(z.a,{component:"nav","aria-label":"main mailbox folders",children:n[r].map((function(t){var n=t.senderEmail,r=t.subject,i=t.id;return Object(a.jsxs)(H.a,{button:!0,children:[Object(a.jsx)(U.a,{primary:n,secondary:"Subject: ".concat(r),onClick:function(){return c(i)}}),Object(a.jsx)(W.a,{onClick:function(){return e(P(i))},children:Object(a.jsx)(E.a,{})})]},K()())}))}):Object(a.jsx)("h3",{className:"err_description",children:"There is no emails"})},X=n(109),Y=n(167),Z=n(158),$=function(e){var t=e.tabs,n=Object(u.b)(),r=Object(u.c)((function(e){return e.navigationInfo})).currTab;return Object(a.jsx)(X.a,{square:!0,children:Object(a.jsx)(Y.a,{value:t.findIndex((function(e){return e.toLowerCase()===r})),indicatorColor:"secondary",textColor:"primary",onChange:function(e,a){var r=t[a];n({type:N,payload:{tab:r}})},centered:!0,children:t.map((function(e){return Object(a.jsx)(Z.a,{label:e},K()())}))})})},ee=n(23),te=(n(107),n(160)),ne=n(161),ae=n(172),re=n(162),ce=n(159),ie=n(19),se=Object(ce.a)((function(e){return{search:Object(ee.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ie.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ie.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(ee.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"15ch","&:focus":{width:"20ch"}})}})),oe=function(){var e=se(),t=Object(u.b)(),n=Object(j.a)({mode:"onChange"}),c=n.register,i=n.formState,s=n.watch,o=i.isValid,l=i.errors;return Object(r.useEffect)((function(){var e=s("searchedEmail");o&&e?t(function(e){return function(){var t=Object(k.a)(C.a.mark((function t(n){var a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B("/messages?email=".concat(e));case 3:a=t.sent,n({type:_,payload:{messages:a}}),n(D(null)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(D(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(e)):l.searchedEmail&&t(D(l.searchedEmail.type))}),[i]),Object(a.jsx)(te.a,{position:"static",children:Object(a.jsxs)(ne.a,{children:[Object(a.jsx)(m.a,{variant:"h4",children:"Emails Manager"}),Object(a.jsxs)("div",{className:e.search,children:[Object(a.jsx)("div",{className:e.searchIcon,children:Object(a.jsx)(re.a,{})}),Object(a.jsx)(ae.a,{placeholder:"Enter email address",name:"searchedEmail",inputRef:c({required:!0,pattern:S}),classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}})]})]})})},le=n(171),ue=n(169),de=function(){var e=Object(b.h)().pathname,t=Object(u.c)((function(e){return e})).error,n=e.split("/"),r="manage-emails"===n[n.length-1];return Object(a.jsx)(le.a,{open:Boolean(t)&&r,autoHideDuration:6e3,children:Object(a.jsx)(ue.a,{variant:"filled",severity:"error",children:T[t]||t})})},be=function(){var e=Object(b.g)();return Object(a.jsxs)("div",{className:"manage-emails page",children:[Object(a.jsx)(oe,{}),Object(a.jsx)($,{tabs:["sent","received"]}),Object(a.jsx)(Q,{}),Object(a.jsx)(de,{}),Object(a.jsx)(F.a,{size:"large",color:"primary","aria-label":"add",onClick:function(){return e.push("/manage-emails/compose")},children:Object(a.jsx)(J.a,{})})]})},je=n(165),pe=function(){var e=Object(b.g)(),t=Object(u.b)(),n=Object(u.c)((function(e){return e.navigationInfo})),r=n.chosenMsgId,c=n.currTab,i=Object(u.c)((function(e){return e.messages})),s=function(){return e.push("/manage-emails")},o=i[c].find((function(e){return e.id===r})),l=o.subject,d=o.body;return Object(a.jsxs)(p.a,{className:"compose-email",open:!0,scroll:"paper",onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsxs)(h.a,{id:"alert-dialog-title",disableTypography:!0,children:["Email",Object(a.jsx)(f.a,{"aria-label":"close",onClick:s,children:Object(a.jsx)(y.a,{})})]}),Object(a.jsxs)(O.a,{children:[Object(a.jsx)(m.a,{variant:"title",children:l}),Object(a.jsx)(je.a,{children:d})]}),Object(a.jsx)(x.a,{children:Object(a.jsxs)(v.a,{onClick:function(){t(P(r)),s()},color:"primary",variant:"contained",children:["delete",Object(a.jsx)(E.a,{})]})})]})};var he=function(){return Object(a.jsxs)(d.a,{children:[Object(a.jsxs)(b.d,{children:[Object(a.jsx)(b.b,{exact:!0,path:"/",render:function(){return Object(a.jsx)(b.a,{to:"/manage-emails"})}}),Object(a.jsx)(b.b,{path:"/manage-emails",component:be})]}),Object(a.jsxs)(b.d,{children:[Object(a.jsx)(b.b,{path:"/manage-emails/compose",component:G}),Object(a.jsx)(b.b,{path:"/manage-emails/email-body",component:pe})]})]})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,173)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},fe=n(43),Oe={sent:[],received:[]};var ge={currTab:"sent",chosenMsgId:null};var xe="requiredSearchedEmail";var ve=Object(s.combineReducers)({messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case _:return a.messages;case R:return Object(fe.a)(e,(function(e){e.sent=e.sent.filter((function(e){return e.id!==a.msgId})),e.received=e.received.filter((function(e){return e.id!==a.msgId}))}));case M:return Object(fe.a)(e,(function(e){e.sent.push(a.newMsg)}));default:return e}},navigationInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case N:return Object(fe.a)(e,(function(e){e.currTab=a.tab}));case q:return Object(fe.a)(e,(function(e){e.chosenMsgId=a.msgId}));default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case L:return"required"===a?"requiredSearchedEmail":a;default:return e}}}),ye=Object(s.createStore)(ve,Object(l.composeWithDevTools)(Object(s.applyMiddleware)(o.a)));i.a.render(Object(a.jsx)(u.a,{store:ye,children:Object(a.jsx)(he,{})}),document.getElementById("root")),me()},94:function(e,t,n){},99:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.fe954c47.chunk.js.map